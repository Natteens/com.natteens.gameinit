# üéÆ GameInit

![Unity](https://img.shields.io/badge/Unity-2022.3+-blue.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)
![Package](https://img.shields.io/badge/Package-v1.2.1-orange.svg)

---

## üì• Instala√ß√£o

Este pacote pode ser instalado atrav√©s do Unity Package Manager.

### Via Git URL
1. Abra o Package Manager (`Window` ‚Üí `Package Manager`)
2. Clique no bot√£o `+` e selecione `Add package from git URL...`
3. Digite: `https://github.com/Natteens/com.natteens.gameinit.git`

### Via Package Manager Local
1. Clone o reposit√≥rio localmente
2. No Package Manager, clique no `+` e selecione `Add package from disk...`
3. Selecione o arquivo `package.json` do projeto

---

## üìã √çndice

- [üéØ Sistemas de Eventos](#-sistemas-de-eventos)
- [‚è±Ô∏è Sistema de Timers](#Ô∏è-sistema-de-timers)
- [üé¨ Eventos de Anima√ß√£o](#-eventos-de-anima√ß√£o)
- [üõ†Ô∏è Utilit√°rios](#Ô∏è-utilit√°rios)
- [üìÅ Organiza√ß√£o da Hierarquia](#-organiza√ß√£o-da-hierarquia)
- [üéÆ Exemplos de Uso](#-exemplos-de-uso)
- [üìö API Reference](#-api-reference)

---

## üéØ Sistemas de Eventos

O GameInit oferece um sistema robusto de eventos baseado em **Event Channels** que permite comunica√ß√£o desacoplada entre diferentes partes do jogo, seguindo o padr√£o **Observer** e **Publisher-Subscriber**.

### üì° Event Channels Dispon√≠veis

| Tipo | Descri√ß√£o | Uso Comum |
|------|-----------|-----------|
| **VoidEventChannel** | Eventos sem par√¢metros | Morte do jogador, fim de fase |
| **BoolEventChannel** | Eventos booleanos | Estados on/off, ativa√ß√£o |
| **IntEventChannel** | N√∫meros inteiros | Score, vida, quantidade |
| **FloatEventChannel** | N√∫meros decimais | Velocidade, tempo, percentual |
| **StringEventChannel** | Texto | Mensagens, IDs, nomes |
| **Vector2EventChannel** | Vetores 2D | Posi√ß√£o 2D, dire√ß√£o |
| **Vector3EventChannel** | Vetores 3D | Posi√ß√£o 3D, rota√ß√£o |
| **GameEventChannel** | Eventos customizados | Eventos complexos |

### üöÄ Como Usar Event Channels

#### 1. **Criando um Event Channel**
```
üìÅ Project ‚Üí Bot√£o direito ‚Üí Create ‚Üí GameInit ‚Üí Events ‚Üí [Tipo do Event]
```

#### 2. **Disparando Eventos**
```csharp
// No script que dispara o evento
[SerializeField] private VoidEventChannel onPlayerDied;
[SerializeField] private IntEventChannel onScoreChanged;

void PlayerDeath()
{
    onPlayerDied.RaiseEvent();
}

void AddScore(int points)
{
    onScoreChanged.RaiseEvent(points);
}
```

#### 3. **Escutando Eventos**
```csharp
// No script que recebe o evento
[SerializeField] private VoidEventChannel onPlayerDied;
[SerializeField] private IntEventChannel onScoreChanged;

void Start()
{
    onPlayerDied.Subscribe(HandlePlayerDeath);
    onScoreChanged.Subscribe(HandleScoreChange);
}

void HandlePlayerDeath()
{
    // L√≥gica quando o jogador morre
    ShowGameOverScreen();
}

void HandleScoreChange(int newScore)
{
    // Atualiza UI do score
    scoreText.text = $"Score: {newScore}";
}

void OnDestroy()
{
    // Importante: desinscrever para evitar vazamentos
    onPlayerDied?.Unsubscribe(HandlePlayerDeath);
    onScoreChanged?.Unsubscribe(HandleScoreChange);
}
```

### üéß Event Listeners

Para uso visual no Editor, o sistema inclui **Event Listeners** prontos:

| Listener | Funcionalidade |
|----------|----------------|
| **VoidEventListener** | UnityEvents para eventos vazios |
| **BoolEventListener** | UnityEvents para eventos booleanos |
| **IntEventListener** | UnityEvents para eventos inteiros |
| **FloatEventListener** | UnityEvents para eventos decimais |
| **StringEventListener** | UnityEvents para eventos de texto |
| **Vector2EventListener** | UnityEvents para eventos Vector2 |
| **Vector3EventListener** | UnityEvents para eventos Vector3 |
| **GameEventListener** | UnityEvents para eventos customizados |

> üí° **Dica**: Use Event Listeners quando quiser configurar respostas no Inspector sem c√≥digo!

---

## ‚è±Ô∏è Sistema de Timers

Sistema flex√≠vel de **timers** com diferentes tipos para diversas necessidades de gameplay.

### üïê Tipos de Timer

#### 1. **CountdownTimer** - Contagem Regressiva
```csharp
// Timer simples de 10 segundos
var countdown = new CountdownTimer(10f);
countdown.OnTimerStop += () => Debug.Log("Tempo esgotado!");
countdown.Start();

// Verifica√ß√µes √∫teis
if (countdown.IsFinished)
    ShowTimeUpMessage();

// Reset para novo uso
countdown.Reset();
countdown.Reset(15f); // Reset com novo tempo
```

#### 2. **StopwatchTimer** - Cron√¥metro
```csharp
// Cron√¥metro para medir tempo
var stopwatch = new StopwatchTimer();
stopwatch.Start();

// Ap√≥s algum tempo...
float timeElapsed = stopwatch.Time;
Debug.Log($"Tempo decorrido: {timeElapsed:F2}s");
```

#### 3. **TickTimer** - Timer com Ticks
```csharp
// Timer infinito - tick a cada 1 segundo
var infiniteTimer = new TickTimer(1f);
infiniteTimer.OnTick += () => Debug.Log("Tick!");
infiniteTimer.Start();

// Timer com limite - 5 ticks de 2 segundos cada
var limitedTimer = new TickTimer(2f, 5);
limitedTimer.OnTick += () => Debug.Log($"Tick {limitedTimer.TickCount}/{limitedTimer.MaxTicks}");
limitedTimer.OnAllTicksCompleted += () => Debug.Log("Todos os ticks completados!");
limitedTimer.Start();

// Informa√ß√µes √∫teis
float timeUntilNext = limitedTimer.GetTimeUntilNextTick();
int remaining = limitedTimer.RemainingTicks;
float progress = limitedTimer.Progress; // 0-1 para timers com limite
```

### üéõÔ∏è Funcionalidades dos Timers

| Funcionalidade | Descri√ß√£o |
|---------------|-----------|
| **Eventos** | `OnTimerStart`, `OnTimerStop`, `OnTick`, `OnAllTicksCompleted` |
| **Controle** | `Start()`, `Stop()`, `Pause()`, `Resume()` |
| **Estado** | `IsRunning`, `IsFinished`, `IsCompleted` |
| **Progresso** | `Progress` (0-1), `Time`, `RemainingTicks` |
| **Reset** | `Reset()`, `Reset(newTime)` // CountdownTimer apenas |

### üí° Exemplo Pr√°tico - Sistema de Power-Up
```csharp
public class PowerUpManager : MonoBehaviour
{
    private CountdownTimer powerUpTimer;
    private TickTimer damageOverTimeTimer;
    
    void Start()
    {
        // Power-up dura 30 segundos
        powerUpTimer = new CountdownTimer(30f);
        powerUpTimer.OnTimerStop += DeactivatePowerUp;
        
        // Dano a cada 0.5 segundos durante o power-up
        damageOverTimeTimer = new TickTimer(0.5f);
        damageOverTimeTimer.OnTick += DealDamage;
    }
    
    public void ActivatePowerUp()
    {
        powerUpTimer.Start();
        damageOverTimeTimer.Start();
    }
    
    void DeactivatePowerUp()
    {
        damageOverTimeTimer.Stop();
        // L√≥gica de desativa√ß√£o
    }
    
    void Update()
    {
        powerUpTimer?.Tick(Time.deltaTime);
        damageOverTimeTimer?.Tick(Time.deltaTime);
    }
}
```

---

## üé¨ Eventos de Anima√ß√£o

Sistema para integrar **eventos customizados** em anima√ß√µes do Unity de forma visual e program√°tica.

### üß© Componentes

| Componente | Fun√ß√£o |
|------------|--------|
| **AnimationEvent** | Estrutura para eventos de anima√ß√£o |
| **AnimationEventReceiver** | Recebe e processa eventos |
| **AnimationEventStateBehaviour** | StateMachineBehaviour para Animator |

### üéØ Como Usar

#### 1. **Configurando o Receiver**
```csharp
public class PlayerController : MonoBehaviour
{
    private AnimationEventReceiver animReceiver;
    
    void Start()
    {
        animReceiver = GetComponent<AnimationEventReceiver>();
        
        // Adicionar eventos via c√≥digo
        animReceiver.AddEvent("Jump", OnJumpEvent);
        animReceiver.AddEvent("Land", OnLandEvent);
        animReceiver.AddEvent("Attack", OnAttackEvent);
    }
    
    void OnJumpEvent()
    {
        Debug.Log("Player jumped!");
        // Spawnar part√≠culas, tocar som, etc.
    }
    
    void OnLandEvent()
    {
        Debug.Log("Player landed!");
        // Shake camera, spawnar dust, etc.
    }
    
    void OnAttackEvent()
    {
        Debug.Log("Attack hit!");
        // Detectar colis√µes, aplicar dano, etc.
    }
}
```

#### 2. **Configurando na Anima√ß√£o**
```
1. Abra a Animation Window
2. Selecione o frame onde quer o evento
3. Clique em "Add Event"
4. Function: OnAnimationEventTriggered
5. String Parameter: "Jump" (nome do evento)
```

#### 3. **Configura√ß√£o Visual no Inspector**
O `AnimationEventReceiver` tamb√©m permite configurar eventos diretamente no Inspector usando UnityEvents, sem c√≥digo!

---

## üõ†Ô∏è Utilit√°rios

### üèóÔ∏è Singleton Pattern

Implementa√ß√£o **thread-safe** e **otimizada** do padr√£o Singleton para MonoBehaviours:

```csharp
public class GameManager : Singleton<GameManager>
{
    [Header("Game Settings")]
    public float gameSpeed = 1f;
    public int maxLives = 3;
    
    protected override void Awake()
    {
        base.Awake(); // Sempre chamar primeiro!
        
        // Sua l√≥gica de inicializa√ß√£o
        InitializeGame();
    }
    
    public void PauseGame()
    {
        Time.timeScale = 0f;
    }
    
    public void ResumeGame()
    {
        Time.timeScale = gameSpeed;
    }
}

// Uso em qualquer lugar do c√≥digo
public class PlayerController : MonoBehaviour
{
    void Die()
    {
        GameManager.Instance.PauseGame();
        // L√≥gica de morte
    }
}
```

### ‚ú® Caracter√≠sticas do Singleton

- **üõ°Ô∏è DontDestroyOnLoad**: Persiste entre cenas automaticamente
- **üîí Thread-Safe**: Implementa√ß√£o segura para threads
- **üóëÔ∏è Auto-Cleanup**: Remove inst√¢ncias duplicadas automaticamente
- **‚ö° Performance**: Acesso direto via propriedade est√°tica

---

## üìÅ Organiza√ß√£o da Hierarquia

### üé® HierarchyHeader

Componente para criar **cabe√ßalhos visuais** e organizar melhor a hierarquia do Unity:

```csharp
// Adicione HierarchyHeader a um GameObject vazio
// Configure no Inspector:
// - Header Text: "=== MANAGERS ==="
// - Text Color: Cyan
// - Background Color: Dark Blue
// - Font Style: Bold
```

**üé® Funcionalidades**:
- ‚úèÔ∏è Texto customiz√°vel
- üé® Cores personalizadas (texto e fundo)
- üìù Estilos de fonte diferentes
- üìè Separadores visuais
- üî§ √çcones e emojis suportados

**üí° Exemplo de Organiza√ß√£o**:
```
üéÆ === GAME MANAGERS ===
    GameManager
    AudioManager
    UIManager

‚öîÔ∏è === COMBAT SYSTEM ===
    EnemySpawner
    WeaponManager
    HealthSystem

üåç === ENVIRONMENT ===
    LevelManager
    Weather
    Lighting
```

---

## üéÆ Exemplos de Uso

O pacote inclui samples completos demonstrando diferentes casos de uso:

### üéØ 2D Sample
- **üì± Sistema de eventos para UI** responsiva
- **‚è∞ Timers para power-ups** tempor√°rios
- **üé® Organiza√ß√£o de hierarquia** exemplar

### üåü 3D Sample  
- **üéØ Sistema de eventos 3D** para intera√ß√µes
- **‚ö° Timers para mec√¢nicas** de gameplay
- **üé¨ Eventos de anima√ß√£o** integrados

### üõ†Ô∏è Utilities Sample
- **üì¶ Prefabs pr√©-configurados** prontos para uso
- **üì° Event Channels** de exemplo
- **üìö Templates de c√≥digo** documentados
- **üß™ Ferramentas de teste** e debug

---

## üìö API Reference

### üì¶ Namespaces Principais

```csharp
using GameInit.AnimationEvents;     // Eventos de anima√ß√£o
using GameInit.GameEvents.Channels; // Canais de eventos
using GameInit.GameEvents.EventListeners; // Listeners
using GameInit.Timers;              // Sistema de timers
using GameInit.Utils;               // Utilit√°rios gerais
```

### üîß M√©todos Principais

#### üì° Event Channels
```csharp
// Disparar eventos
void RaiseEvent(T value)
void RaiseEvent() // Para VoidEventChannel

// Inscri√ß√µes
void Subscribe(Action<T> callback)
void Unsubscribe(Action<T> callback)
void UnsubscribeAll()

// Estado
T CurrentValue { get; }
bool HasValue { get; }
int SubscriberCount { get; }
```

#### ‚è±Ô∏è Timers
```csharp
// Controle
void Start()
void Stop()
void Pause()
void Resume()
void Reset()
void Reset(float newTime) // CountdownTimer apenas

// Estado
bool IsRunning { get; }
bool IsFinished { get; }
bool IsCompleted { get; } // TickTimer apenas
float Progress { get; }
float Time { get; }

// TickTimer espec√≠fico
int TickCount { get; }
int MaxTicks { get; }
int RemainingTicks { get; }
float GetTickInterval()
float GetTimeUntilNextTick()
```

---

### üêõ Reportar Bugs
Encontrou um bug? Abra uma **issue** no GitHub com:
- üìù Descri√ß√£o detalhada
- üîÑ Passos para reproduzir
- üñ•Ô∏è Vers√£o do Unity
- üì± Plataforma de teste

---

## üìÑ Licen√ßa

Este projeto est√° licenciado sob a **MIT License** - consulte o arquivo [LICENSE.md](LICENSE.md) para detalhes.

---

## üìû Suporte & Contato

### üÜò Precisa de Ajuda?
- üìß **Email**: [natteens.social@gmail.com](mailto:natteens.social@gmail.com)
- üêô **GitHub**: [https://github.com/Natteens/com.natteens.gameinit](https://github.com/Natteens/com.natteens.gameinit)
- üìñ **Documenta√ß√£o**: [GitHub Wiki](https://github.com/Natteens/com.natteens.gameinit/wiki)
- üí¨ **Discuss√µes**: [GitHub Discussions](https://github.com/Natteens/com.natteens.gameinit/discussions)

<p align="center">

<strong>Feito com ‚ù§Ô∏è por <a href="https://github.com/Natteens">Nathan da Silva Miranda</a></strong><br>
<em>GameInit - Acelere o desenvolvimento dos seus jogos Unity!</em> üöÄ

</p>
